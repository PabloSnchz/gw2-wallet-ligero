<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Bóveda del Gato Negro — v2.0.0</title>

  <!-- Favicons / App icons -->
  <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">
  <link rel="icon" type="image/png" href="assets/favicon.png" sizes="32x32">
  <link rel="apple-touch-icon" href="assets/favicon.png">

  <!-- Google Fonts (Cinzel Decorative + Unica One + Righteous) -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&family=Righteous&family=Unica+One&display=swap" rel="stylesheet">

  <!-- CSS principal -->
  <link rel="stylesheet" href="css/main.css?v=1.6.2">
</head>
<body class="dense">

  <!-- ======= HEADER ArenaNet Style (utilbar + hero + overlay) ======= -->
  <header class="an-header">

    <!-- Top bar: utilidades + redes + API Keys (rojo) -->
    <div class="an-utilbar">
      <div class="an-util-left">
        <a class="an-util-link" href="https://wiki.guildwars2.com/wiki/Main_Page" target="_blank" rel="noopener">Wiki GW2</a>
        <a class="an-util-link" href="https://en-forum.guildwars2.com/" target="_blank" rel="noopener">Foros</a>
        <a class="an-util-link" href="https://help.guildwars2.com/hc" target="_blank" rel="noopener">Ayuda</a>
        <a class="an-util-link" href="https://www.guildwars2.com/" target="_blank" rel="noopener">Sitio oficial</a>
        <span class="an-sep">|</span>
        <a class="an-util-link an-link--keys" href="https://account.arena.net/applications" target="_blank" rel="noopener">API Keys</a>

        <!-- Dropdown: Enlaces útiles -->
        <details class="util-dd">
          <summary class="util-trigger">Enlaces útiles ▾</summary>
          <div class="util-menu" role="menu">
            <a class="util-item" href="https://gw2efficiency.com/" target="_blank" rel="noopener">GW2Efficiency</a>
            <a class="util-item" href="https://gw2timer.com/" target="_blank" rel="noopener">Timers Metaeventos</a>
            <a class="util-item" href="https://www.deltaconnected.com/arcdps/arcdps/" target="_blank" rel="noopener">ArcDPS</a>
            <a class="util-item" href="https://wiki.guildwars2.com/wiki/Event_timers" target="_blank" rel="noopener">Wiki: Event Timers</a>
            <a class="util-item" href="https://api.guildwars2.com/v2" target="_blank" rel="noopener">API Explorer</a>
          </div>
        </details>
      </div>

      <div class="an-util-right">
        <!-- Discord -->
        <a class="an-social" href="https://discord.gg/ZGNsfsqyKe" target="_blank" rel="noopener" aria-label="Discord">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M20.317 4.369A19.791 19.791 0 0 0 16.558 3c-.2.362-.434.85-.595 1.232a17.3 17.3 0 0 0-4.926 0A8.258 8.258 0 0 0 10.442 3c-1.4.258-2.725.682-3.758 1.369C3.659 7.14 3.015 9.801 3.153 12.422c1.544 1.148 3.04 1.852 4.512 2.316a12.7 12.7 0 0 0 .894-1.475 8.6 8.6 0 0 1-1.407-.68c.118-.088.234-.179.347-.273 2.713 1.261 5.64 1.261 8.35 0 .114.094.23.185.347.273-.446.266-.92.492-1.408.68.268.514.566 1.028.897 1.476 1.47-.467 2.966-1.17 4.509-2.319.256-4.402-.907-7.036-2.877-9.053ZM9.61 12.7c-.82 0-1.491-.75-1.491-1.674 0-.924.66-1.677 1.49-1.677.84 0 1.502.753 1.492 1.677 0 .924-.652 1.673-1.492 1.673Zm4.78 0c-.82 0-1.491-.75-1.491-1.674 0-.924.66-1.677 1.49-1.677.84 0 1.503.753 1.492 1.677 0 .924-.652 1.673-1.492 1.673Z"/></svg>
        </a>
        <!-- Instagram -->
        <a class="an-social an-ig" href="https://www.instagram.com/pablin.schez/" target="_blank" rel="noopener" aria-label="Instagram">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M7 2C4.239 2 2 4.239 2 7v10c0 2.761 2.239 5 5 5h10c2.762 0 5-2.239 5-5V7c0-2.761-2.238-5-5-5H7zm10 2c1.657 0 3 1.343 3 3v10c0 1.657-1.343 3-3 3H7c-1.657 0-3-1.343-3-3V7c0-1.657 1.343-3 3-3h10zm-5 3a5 5 0 1 0 .001 10.001A5 5 0 0 0 12 7zm5.5-1a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/></svg>
        </a>
        <!-- YouTube -->
        <a class="an-social an-yt" href="https://www.youtube.com/@pablinschez" target="_blank" rel="noopener" aria-label="YouTube">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M23.5 6.2s-.2-1.6-.8-2.3c-.8-.8-1.7-.8-2.1-.9C17.9 2.7 12 2.7 12 2.7s-5.9 0-8.6.3c-.4 0-1.3.1-2.1.9C.7 4.6.5 6.2.5 6.2S.3 8.1.3 10v2c0 1.9.2 3.8.2 3.8s.2 1.6.8 2.3c.8.8 1.9.8 2.4.9 1.7.2 7.3.3 8.3.3 0 0 5.9 0 8.6-.3.4 0 1.3-.1 2.1-.9.6-.7.8-2.3.8-2.3s.2-1.9.2-3.8V10c0-1.9-.2-3.8-.2-3.8zM9.8 14.5V7.9l6.1 3.3-6.1 3.3z"/></svg>
        </a>
      </div>
    </div>

    <!-- Hero: textura GW2 ancho completo -->
    <div class="an-hero" role="img" aria-label="Arte de Guild Wars 2">
      <!-- Overlay: BRAND + TABS — dentro del hero (no tapa la util-bar) -->
      <div class="an-overlay" aria-label="Identidad y navegación principal">
        <div class="overlay-inner">
          <div class="brand-wrap">
            <img class="brand-logo" src="assets/logo-gato-negro.png" alt="Gato Negro">
            <h1 class="brand-title">
              <span class="brand-top">Bóveda</span>
              <span class="brand-bottom">del Gato Negro</span>
            </h1>
          </div>

          <nav class="overlay-tabs" aria-label="Vista principal">
            <button class="overlay-tab overlay-tab--active" data-view="cards" type="button">Tarjetas</button>
            <button class="overlay-tab" data-view="meta" type="button" disabled>MetaEventos</button>
          </nav>
        </div>
      </div>
    </div>
  </header>

  <!-- ======= CONTENIDO PRINCIPAL ======= -->
  <main class="container layout">
    <!-- PANEL PRINCIPAL -->
    <section id="walletPanel" class="panel col-main" aria-labelledby="walletTitle">
      <h2 class="panel__title" id="walletTitle">Divisas de la cuenta</h2>

      <div class="panel__body">
        <!-- Owner + Selección de KEY + icon-btns -->
        <div class="owner">
          <div class="owner-left">
            <span class="muted">Cuenta:</span>
            <span id="ownerLabel" class="owner__pill">—</span>
          </div>

          <div class="owner-right" id="ownerRight">
            <label for="keySelect" class="muted">Seleccionar KEY</label>
            <select id="keySelect" aria-label="Seleccionar API Key"></select>

            <button id="copyKeyBtn" class="icon-btn" title="Copiar API Key" aria-label="Copiar">
              <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M16 1H4c-1.1 0-2 .9-2 2v12h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
            </button>
            <button id="renameKeyBtn" class="icon-btn" title="Renombrar API Key" aria-label="Renombrar">
              <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04l-2.34-2.34-1.42 1.42 2.34 2.34 1.42-1.42z"/></svg>
            </button>
            <button id="deleteKeyBtn" class="icon-btn" title="Eliminar API Key" aria-label="Eliminar">
              <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1z"/></svg>
            </button>
            <button id="refreshBtn" class="icon-btn" title="Actualizar datos" aria-label="Actualizar">
              <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 6V3L8 7l4 4V8c2.76 0 5 2.24 5 5s-2.24 5-5 5-5-2.24-5-5H5c0 3.87 3.13 7 7 7s7-3.13 7-7-3.13-7-7-7z"/></svg>
            </button>
            <button id="addKeyBtn" class="icon-btn" title="Agregar API Key" aria-label="Agregar">
              <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M19 13H13V19H11V13H5V11H11V5H13V11H19V13Z"/></svg>
            </button>

            <!-- Popover alta KEY -->
            <form id="keyPopover" class="key-popover" hidden>
              <div class="kp-row">
                <label for="newKeyLabel" class="muted">Nombre</label>
                <input id="newKeyLabel" type="text" placeholder="Opcional">
              </div>
              <div class="kp-row">
                <label for="newKeyValue" class="muted">API key</label>
                <input id="newKeyValue" type="password" placeholder="pegar API key" required>
              </div>
              <div class="kp-actions">
                <button type="submit" class="btn btn--accent">Guardar</button>
                <button type="button" id="cancelKeyBtn" class="btn">Cancelar</button>
              </div>
              <p class="kp-hint muted">Se guarda localmente. Usar <code>?access_token=</code> evita preflight CORS.</p>
            </form>
          </div>
        </div>

        <!-- Filtros -->
        <div class="filters" aria-label="Filtros de divisas">
          <div class="field">
            <label for="searchBox">Buscar</label>
            <input id="searchBox" type="text" placeholder="Nombre de la divisa…"/>
          </div>

          <div class="field">
            <label for="categorySelect">Categoría</label>
            <select id="categorySelect">
              <option value="">Todas</option>
              <option value="general">Generales</option>
              <option value="competitiva">Competitivas</option>
              <option value="mapa">De mapa</option>
              <option value="blacklion">Black Lion</option>
              <option value="histórica">Históricas</option>
              <option value="otro">Otro</option>
            </select>
          </div>

          <div class="field">
            <label for="sortSelect">Orden</label>
            <select id="sortSelect">
              <option value="order">Orden del juego</option>
              <option value="name">Nombre (A→Z)</option>
              <option value="amount">Cantidad (desc)</option>
            </select>
          </div>

          <div class="field checkbox">
            <label><input type="checkbox" id="onlyPositive"/> Solo &gt; 0</label>
          </div>

          <div class="field checkbox">
            <label><input type="checkbox" id="onlyMain"/> Solo principales</label>
          </div>

          <div class="field field-inline">
            <button id="clearFiltersBtn" class="btn" title="Reiniciar filtros">Limpiar filtros</button>
            <button id="toggleViewBtn" class="btn btn--ghost" title="Vista tarjeta/tabla">Vista tabla</button>
          </div>
        </div>

        <p class="status" id="status">Listo.</p>

        <!-- Favoritas -->
        <div id="favBlock" class="fav-block" hidden>
          <h3 class="fav-title">Favoritas</h3>
          <div id="favCards" class="grid"></div>
        </div>

        <!-- Tarjetas -->
        <div id="walletCards" class="grid" aria-live="polite"></div>

        <!-- Vista compacta (tabla) -->
        <div id="walletTableWrap" class="table-wrap" hidden>
          <table id="walletTable">
            <thead>
              <tr>
                <th style="width:28px;">&nbsp;</th>
                <th>Divisa</th>
                <th class="right">Cantidad</th>
                <th>Categorías</th>
                <th class="right">★</th>
              </tr>
            </thead>
            <tbody><!-- JS --></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Sidebar -->
    <aside class="col-side">
      <section class="panel">
        <h3 class="panel__title">Conversor Gem ↔ Gold</h3>
        <div class="panel__body"><p class="muted">WIP</p></div>
      </section>
      <section class="panel">
        <h3 class="panel__title">Próximas funciones</h3>
        <div class="panel__body">
          <ul class="muted">
            <li>Exportar CSV/JSON</li>
            <li>Historial y variación</li>
            <li>Deep‑links</li>
          </ul>
        </div>
      </section>
    </aside>
  </main>

  <!-- ======= FOOTER con marquita ======= -->
  <footer class="site-footer">
    <div class="footer-inner">
      <img class="footer-mark" src="assets/gn-mark.svg" alt="Marca Gato Negro">
      <span class="footer-copy">© Comunidad Gato Negro — Herramientas para GW2</span>
    </div>
  </footer>

  <!-- JS principal -->
  <script src="js/app.js?v=1.3.4" defer></script>
</body>
</html>