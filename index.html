
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GW2 Wallet — v1.4.0-preview (ArenaNet)</title>
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <!-- Header con tabs + link externo a gestión de API Keys -->
  <header class="an-header">
    <div class="an-header__inner">
      <div class="an-brand">GW2 Wallet</div>
      <nav class="an-nav">
        <button class="an-tab an-tab--active" data-view="cards">Tarjetas</button>
        <button class="an-tab" data-view="compact">Compacta</button>
        <a class="an-link" href="https://account.arena.net/applications" target="_blank" rel="noopener">API Keys</a>
      </nav>
    </div>
    <div class="an-accent"></div>
  </header>

  <main class="container">
    <!-- Banda superior con Account ID + combo + acciones reubicadas -->
    <section class="panel">
      <h2 class="panel__title">Divisas de la cuenta</h2>
      <div class="panel__body">
        <div class="owner">
          <div class="owner-left">
            <span class="muted">Cuenta:</span>
            <span id="ownerLabel" class="owner__pill">—</span>
          </div>
          <div class="owner-right">
            <label for="keySelect" class="muted">Seleccionar KEY</label>
            <select id="keySelect"></select>
            <button id="copyKeyBtn" class="btn" title="Copiar API Key">Copiar</button>
            <button id="renameKeyBtn" class="btn" title="Renombrar API Key">Renombrar</button>
            <button id="deleteKeyBtn" class="btn" title="Eliminar API Key">Eliminar</button>
            <button id="refreshBtn" class="btn btn--primary" title="Actualizar datos">Actualizar</button>
          </div>
        </div>

        <!-- Filtros -->
        <div class="filters">
          <div class="field"><label for="searchBox">Buscar</label><input id="searchBox" type="text" placeholder="Nombre de la divisa…" /></div>
          <div class="field"><label for="categorySelect">Categoría</label>
            <select id="categorySelect"><option value="">Todas</option><option value="general">Generales</option><option value="competitive">Competitivas</option><option value="map">De mapa</option><option value="key">Llaves</option><option value="dungeon">Mazmorras/Fractales</option><option value="blacklion">Black Lion</option><option value="historic">Históricas</option></select>
          </div>
          <div class="field"><label for="sortSelect">Orden</label>
            <select id="sortSelect"><option value="order">Orden del juego</option><option value="name">Nombre (A→Z)</option><option value="amount">Cantidad (desc)</option></select>
          </div>
          <div class="field checkbox"><label><input type="checkbox" id="onlyPositive" /> Solo &gt; 0</label></div>
          <div class="field checkbox"><label><input type="checkbox" id="onlyMain" /> Solo principales</label></div>
          <div class="field checkbox"><label><input type="checkbox" id="denseMode" /> Densidad ArenaNet</label></div>
        </div>

        <p class="status" id="status">Esperando acción…</p>

        <!-- Contenido: exclusividad de vistas -->
        <div id="walletCards" class="grid" aria-live="polite"></div>
        <div id="walletTableWrap" class="table-wrap" hidden>
          <table class="table" id="walletTable" aria-label="Divisas (vista compacta)">
            <thead><tr><th>Icono</th><th>Divisa</th><th class="right">Cantidad</th><th>Categorías</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>
  </main>

  <select id="hiddenViewSelect" hidden>
    <option value="cards">Tarjetas</option>
    <option value="compact">Compacta</option>
  </select>

  <script src="js/app.js"></script>
  <script>
    // Tabs del header sincronizados con la vista
    document.addEventListener('click', (e)=>{
      if(e.target.matches('.an-tab')){
        document.querySelectorAll('.an-tab').forEach(b=>b.classList.remove('an-tab--active'));
        e.target.classList.add('an-tab--active');
        const v = e.target.getAttribute('data-view') || 'cards';
        const sel = document.getElementById('hiddenViewSelect');
        sel.value = v;
        sel.dispatchEvent(new Event('change'));
      }
    });
  </script>
</body>
</html>
