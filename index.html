<!doctype html><html lang='es'><head><meta charset='utf-8'/><meta name='viewport' content='width=device-width, initial-scale=1'/><title>GW2 Wallet — v1.6.0-alpha1</title><link rel='stylesheet' href='css/styles.css'/>  <!-- Parche: layout metaeventos + tema tarjetas -->
  <link rel="stylesheet" href="css/patch-fix-metaeventos.css"/>
  <link rel="stylesheet" href="css/patch-cards-theme.css"/>
  <link rel="stylesheet" href="css/ui-toolbar.css">
</head><body class='dense'><header class='an-header'><div class='an-header__texture'></div><div class='an-header__inner'><div class='an-brand'>GW2 Wallet</div><nav class='an-nav'><button id='tabCards' class='an-tab an-tab--active' data-view='cards'>Tarjetas</button><button id='tabMeta' class='an-tab' data-view='meta'>MetaEventos</button><a class='an-link' href='https://account.arena.net/applications' target='_blank' rel='noopener'>API Keys</a></nav></div><div class='an-accent'></div></header><main class='container layout'><section id='walletPanel' class='panel col-main'><h2 class='panel__title'>Divisas de la cuenta</h2><div class='panel__body'><div class='owner'><div class='owner-left'><span class='muted'>Cuenta:</span><span id='ownerLabel' class='owner__pill'>—</span></div><div class='owner-right'><label for='keySelect' class='muted'>Seleccionar KEY</label><select id='keySelect'></select><button id='copyKeyBtn' class='icon-btn' title='Copiar API Key' aria-label='Copiar'><svg class='icon' viewBox='0 0 24 24' aria-hidden='true'><path d='M16 1H4c-1.1 0-2 .9-2 2v12h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z'/></svg></button><button id='renameKeyBtn' class='icon-btn' title='Renombrar API Key' aria-label='Renombrar'><svg class='icon' viewBox='0 0 24 24' aria-hidden='true'><path d='M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04l-2.34-2.34-1.42 1.42 2.34 2.34 1.42-1.42z'/></svg></button><button id='deleteKeyBtn' class='icon-btn' title='Eliminar API Key' aria-label='Eliminar'><svg class='icon' viewBox='0 0 24 24' aria-hidden='true'><path d='M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1z'/></svg></button><button id='refreshBtn' class='icon-btn' title='Actualizar datos' aria-label='Actualizar'><svg class='icon' viewBox='0 0 24 24' aria-hidden='true'><path d='M12 6V3L8 7l4 4V8c2.76 0 5 2.24 5 5s-2.24 5-5 5-5-2.24-5-5H5c0 3.87 3.13 7 7 7s7-3.13 7-7-3.13-7-7-7z'/></svg></button></div></div><div class='filters'><div class='field'><label for='searchBox'>Buscar</label><input id='searchBox' type='text' placeholder='Nombre de la divisa…'/></div><div class='field'><label for='categorySelect'>Categoría</label><select id='categorySelect'><option value=''>Todas</option><option value='general'>Generales</option><option value='competitive'>Competitivas</option><option value='map'>De mapa</option><option value='key'>Llaves</option><option value='dungeon'>Mazmorras/Fractales</option><option value='blacklion'>Black Lion</option><option value='historic'>Históricas</option></select></div><div class='field'><label for='sortSelect'>Orden</label><select id='sortSelect'><option value='order'>Orden del juego</option><option value='name'>Nombre (A→Z)</option><option value='amount'>Cantidad (desc)</option></select></div><div class='field checkbox'><label><input type='checkbox' id='onlyPositive'/> Solo > 0</label></div><div class='field checkbox'><label><input type='checkbox' id='onlyMain'/> Solo principales</label></div></div><p class='status' id='status'>Esperando acción…</p><div id='favBlock' class='fav-block' hidden><h3 class='fav-title'>Favoritas</h3><div id='favCards' class='grid'></div></div><div id='walletCards' class='grid' style='display:grid' aria-live='polite'></div></div></section><aside id='sideBar' class='col-side'><section class='panel'><h3 class='panel__title'>Conversor Gem ↔ Gold</h3><div class='panel__body'><div class='conv-row'><label for='convGems'><img class='mini-icon' src='assets/icons/gem.svg' alt='Gemas'/> Gemas → <img class='mini-icon' src='assets/icons/coin.svg' alt='Gold'/> Gold</label><div class='inputs'><input id='convGems' type='number' min='0' step='1' value='100'/><button id='btnG2C' class='btn btn--accent'>Calcular</button></div><div id='outG2C' class='conv-out muted'>—</div></div><hr/><div class='conv-row'><label for='convGold'><img class='mini-icon' src='assets/icons/coin.svg' alt='Gold'/> Gold → <img class='mini-icon' src='assets/icons/gem.svg' alt='Gemas'/> Gemas</label><div class='inputs'><input id='convGold' type='text' placeholder='5g 10s 0c'/><button id='btnC2G' class='btn btn--accent'>Calcular</button></div><div id='outC2G' class='conv-out muted'>—</div></div><p id='convStatus' class='status'>Tasas actualizadas recientemente.</p></div></section><section class='panel'><h3 class='panel__title'>Próximas funciones</h3><div class='panel__body'><ul class='muted'><li>Exportar CSV/JSON</li><li>Historial y variación</li><li>Deep‑links</li></ul></div></section></aside><section id='metaPanel' class='panel col-main' style='display:none'><h2 class='panel__title'>MetaEventos (Alpha)</h2><div class='panel__body'><div class='meta-toolbar muted' style='margin-bottom:8px;font-size:12px;'>Marcá los eventos que ya hiciste hoy. Los estados se reinician automáticamente cada día.</div><div id='metaGrid' class='meta-grid'></div></div></section></main><div id='tooltip' class='tooltip' role='tooltip' hidden></div><script src='js/app.js'></script>  <!-- Parche: normaliza access_token, selector, botones y fallback de carga -->
  
  <!-- Toolbar de control -->
<section id="toolbar" class="toolbar">
  <div class="key-row">
    <label for="apiKeySelect">Seleccionar API key:</label>
    <select id="apiKeySelect" aria-label="Seleccionar API key"></select>
    <button id="addKeyBtn" class="btn" title="Agregar nueva API key" aria-expanded="false">+</button>
  </div>

  <!-- Formulario colapsable para alta de API key -->
  <form id="addKeyForm" class="add-key collapsed" aria-hidden="true">
    <input id="newKeyLabel" type="text" placeholder="Nombre (opcional)" aria-label="Nombre opcional">
    <input id="newKeyValue" type="password" placeholder="API key" aria-label="API key" required>
    <button type="submit" class="btn primary">Guardar</button>
    <button type="button" id="cancelAddKey" class="btn">Cancelar</button>
    <small class="hint">
      La key se guarda <strong>solo</strong> en tu navegador. No compartas URLs con <code>access_token</code>.
    </small>
  </form>

  <!-- Botonera de filtros/orden/vista -->
  <div id="cardControls" class="controls" role="toolbar" aria-label="Controles de filtrado">
    <button class="btn" data-filter="saldo">Solo con saldo</button>
    <button class="btn" data-filter="principales">Solo principales</button>
    <button class="btn" data-sort="order">Orden oficial</button>
    <button class="btn" data-sort="name">Orden por nombre</button>
    <button class="btn" data-sort="amount">Orden por cantidad</button>
    <button class="btn" data-view="cards">Vista tarjetas</button>
    <button class="btn" data-view="compact">Vista compacta</button>
  </div>
</section>

<!-- Zona de mensajes -->
<div id="messages" role="status" aria-live="polite"></div>

<!-- Contenedor de tarjetas / tabla -->
<section id="cardsContainer" class="cards"></section>

  <script defer src="js/patch-fix-keys-and-layout.js"></script>
  <script defer src="js/ui-toolbar.js"></script>
</body></html>